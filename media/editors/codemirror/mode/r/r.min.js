!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})((function(a){"use strict";a.registerHelper("wordChars","r",/[\w.]/),a.defineMode("r",(function(a){function b(a){for(var b=a.split(" "),c={},d=0;d<b.length;++d)c[b[d]]=!0;return c}function c(a,b){h=null;var c=a.next();if("#"==c)return a.skipToEnd(),"comment";if("0"==c&&a.eat("x"))return a.eatWhile(/[\da-f]/i),"number";if("."==c&&a.eat(/\d/))return a.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(c))return a.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if("'"==c||'"'==c)return b.tokenize=d(c),"string";if("`"==c)return a.match(/[^`]+`/),"variable-3";if("."==c&&a.match(/.[.\d]+/))return"keyword";if(/[\w\.]/.test(c)&&"_"!=c){a.eatWhile(/[\w\.]/);var e=a.current();return i.propertyIsEnumerable(e)?"atom":k.propertyIsEnumerable(e)?(l.propertyIsEnumerable(e)&&!a.match(/\s*if(\s+|$)/,!1)&&(h="block"),"keyword"):j.propertyIsEnumerable(e)?"builtin":"variable"}return"%"==c?(a.skipTo("%")&&a.next(),"operator variable-2"):"<"==c&&a.eat("-")||"<"==c&&a.match("<-")||"-"==c&&a.match(/>>?/)?"operator arrow":"="==c&&b.ctx.argList?"arg-is":m.test(c)?"$"==c?"operator dollar":(a.eatWhile(m),"operator"):/[\(\){}\[\];]/.test(c)?(h=c,";"==c?"semi":null):null}function d(a){return function(b,d){if(b.eat("\\")){var e=b.next();return"x"==e?b.match(/^[a-f0-9]{2}/i):("u"==e||"U"==e)&&b.eat("{")&&b.skipTo("}")?b.next():"u"==e?b.match(/^[a-f0-9]{4}/i):"U"==e?b.match(/^[a-f0-9]{8}/i):/[0-7]/.test(e)&&b.match(/^[0-7]{1,2}/),"string-2"}for(var f;null!=(f=b.next());){if(f==a){d.tokenize=c;break}if("\\"==f){b.backUp(1);break}}return"string"}}function e(a,b,c){a.ctx={type:b,indent:a.indent,flags:0,column:c.column(),prev:a.ctx}}function f(a,b){var c=a.ctx;a.ctx={type:c.type,indent:c.indent,flags:c.flags|b,column:c.column,prev:c.prev}}function g(a){a.indent=a.ctx.indent,a.ctx=a.ctx.prev}var h,i=b("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_"),j=b("list quote bquote eval return call parse deparse"),k=b("if else repeat while function for in next break"),l=b("if else repeat while function for"),m=/[+\-*\/^<>=!&|~$:]/,n=1,o=2,p=4;return{startState:function(){return{tokenize:c,ctx:{type:"top",indent:-a.indentUnit,flags:o},indent:0,afterIdent:!1}},token:function(a,b){if(a.sol()&&(0==(3&b.ctx.flags)&&(b.ctx.flags|=o),b.ctx.flags&p&&g(b),b.indent=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"!=c&&0==(b.ctx.flags&o)&&f(b,n),";"!=h&&"{"!=h&&"}"!=h||"block"!=b.ctx.type||g(b),"{"==h?e(b,"}",a):"("==h?(e(b,")",a),b.afterIdent&&(b.ctx.argList=!0)):"["==h?e(b,"]",a):"block"==h?e(b,"block",a):h==b.ctx.type?g(b):"block"==b.ctx.type&&"comment"!=c&&f(b,p),b.afterIdent="variable"==c||"keyword"==c,c},indent:function(b,d){if(b.tokenize!=c)return 0;var e=d&&d.charAt(0),f=b.ctx,g=e==f.type;return f.flags&p&&(f=f.prev),"block"==f.type?f.indent+("{"==e?0:a.indentUnit):f.flags&n?f.column+(g?0:1):f.indent+(g?0:a.indentUnit)},lineComment:"#"}})),a.defineMIME("text/x-rsrc","r")}));