!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})((function(a){"use strict";a.defineMode("fcl",(function(a){function b(a,b){var d=a.next();if(/[\d\.]/.test(d))return"."==d?a.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==d?a.match(/^[xX][0-9a-fA-F]+/)||a.match(/^0[0-7]+/):a.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if("/"==d||"("==d){if(a.eat("*"))return b.tokenize=c,c(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(l.test(d))return a.eatWhile(l),"operator";a.eatWhile(/[\w\$_\xa1-\uffff]/);var e=a.current().toLowerCase();return h.propertyIsEnumerable(e)||i.propertyIsEnumerable(e)||j.propertyIsEnumerable(e)?"keyword":k.propertyIsEnumerable(e)?"atom":"variable"}function c(a,c){for(var d,e=!1;d=a.next();){if(("/"==d||")"==d)&&e){c.tokenize=b;break}e="*"==d}return"comment"}function d(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function e(a,b,c){return a.context=new d(a.indented,b,c,null,a.context)}function f(a){if(a.context.prev){var b=a.context.type;return"end_block"==b&&(a.indented=a.context.indented),a.context=a.context.prev}}var g=a.indentUnit,h={term:!0,method:!0,accu:!0,rule:!0,then:!0,is:!0,and:!0,or:!0,if:!0,default:!0},i={var_input:!0,var_output:!0,fuzzify:!0,defuzzify:!0,function_block:!0,ruleblock:!0},j={end_ruleblock:!0,end_defuzzify:!0,end_function_block:!0,end_fuzzify:!0,end_var:!0},k={true:!0,false:!0,nan:!0,real:!0,min:!0,max:!0,cog:!0,cogs:!0},l=/[+\-*&^%:=<>!|\/]/;return{startState:function(a){return{tokenize:null,context:new d((a||0)-g,0,"top",!1),indented:0,startOfLine:!0}},token:function(a,c){var d=c.context;if(a.sol()&&(null==d.align&&(d.align=!1),c.indented=a.indentation(),c.startOfLine=!0),a.eatSpace())return null;var g=(c.tokenize||b)(a,c);if("comment"==g)return g;null==d.align&&(d.align=!0);var h=a.current().toLowerCase();return i.propertyIsEnumerable(h)?e(c,a.column(),"end_block"):j.propertyIsEnumerable(h)&&f(c),c.startOfLine=!1,g},indent:function(a,c){if(a.tokenize!=b&&null!=a.tokenize)return 0;var d=a.context,e=j.propertyIsEnumerable(c);return d.align?d.column+(e?0:1):d.indented+(e?0:g)},electricChars:"ryk",fold:"brace",blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:"//"}})),a.defineMIME("text/x-fcl","fcl")}));