!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){return new RegExp("\\b("+a.join("|")+")\\b","i")}function c(a){return new RegExp("("+a.join("|")+")","i")}function d(){return{inComment:!1,inString:!1,inAttributeList:!1,inScript:!1}}function e(a){return{inComment:a.inComment,inString:a.inString,inAttributeList:a.inAttributeList,inScript:a.inScript}}function f(a){return function(d,e){if(d.match(c(a.brackets),!0,!0))return"bracket";if(!e.inComment){if(d.match(/\/\*[^\*\/]*/,!0,!0))return e.inComment=!0,"comment";if(d.match(c(a.singlecomment),!0,!0))return d.skipToEnd(),"comment"}if(e.inComment)return d.match(/[^\*\/]*\*\//,!0,!0)?e.inComment=!1:d.skipToEnd(),"comment";if(!e.inString&&d.match(/\"(\\\"|[^\"])*/,!0,!0))return e.inString=!0,"string";if(e.inString)return d.match(/[^\"]*\"/,!0,!0)?e.inString=!1:d.skipToEnd(),"string";if(a.keywords&&d.match(b(a.keywords),!0,!0))return"keyword";if(d.match(b(a.options),!0,!0))return"keyword";if(d.match(b(a.arcsWords),!0,!0))return"keyword";if(d.match(c(a.arcsOthers),!0,!0))return"keyword";if(a.operators&&d.match(c(a.operators),!0,!0))return"operator";if(!a.inAttributeList&&a.attributes&&d.match(/\[/,!0,!0))return a.inAttributeList=!0,"bracket";if(a.inAttributeList){if(null!==a.attributes&&d.match(b(a.attributes),!0,!0))return"attribute";if(d.match(/]/,!0,!0))return a.inAttributeList=!1,"bracket"}return d.next(),"base"}}var g={mscgen:{keywords:["msc"],options:["hscale","width","arcgradient","wordwraparcs"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},xu:{keywords:["msc"],options:["hscale","width","arcgradient","wordwraparcs","watermark"],attributes:["label","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"],brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]},msgenny:{keywords:null,options:["hscale","width","arcgradient","wordwraparcs","watermark"],attributes:null,brackets:["\\{","\\}"],arcsWords:["note","abox","rbox","box","alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"],arcsOthers:["\\|\\|\\|","\\.\\.\\.","---","--","<->","==","<<=>>","<=>","\\.\\.","<<>>","::","<:>","->","=>>","=>",">>",":>","<-","<<=","<=","<<","<:","x-","-x"],singlecomment:["//","#"],operators:["="]}};a.defineMode("mscgen",function(a,b){var c=g[b&&b.language||"mscgen"];return{startState:d,copyState:e,token:f(c),lineComment:"#",blockCommentStart:"/*",blockCommentEnd:"*/"}}),a.defineMIME("text/x-mscgen","mscgen"),a.defineMIME("text/x-xu",{name:"mscgen",language:"xu"}),a.defineMIME("text/x-msgenny",{name:"mscgen",language:"msgenny"})});