!(function(i,l){"use strict";var e=l.MediaManager={initialize:function(){this.folderpath=i("#folderpath"),this.updatepaths=i("input.update-folder"),this.frame=window.frames.folderframe;var t=this;i(this.frame).one("load",(function(e){t.frameurl=t.frame.location.href}))},submit:function(e){var t=this.frame.document.getElementById("mediamanager-form");t.task.value=e,i("#username").length&&(t.username.value=i("#username").val(),t.password.value=i("#password").val()),t.submit()},onloadframe:function(){this.frameurl=this.frame.location.href;var e,t,a=this.getFolder()||"",o=[],r=(function(e){var a={},o=e.match(/^(?:([^:\/?#.]+):)?(?:\/\/)?(([^:\/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[\?#]|$)))*\/?)?([^?#\/]*))?(?:\?([^#]*))?(?:#(.*))?/);return i.each(["uri","scheme","authority","domain","port","path","directory","file","query","fragment"],(function(e,t){a[t]=o&&o[e]?o[e]:""})),a})(i("#uploadForm").prop("action")),n=u(r.query);for(e in this.updatepaths.each((function(e,t){t.value=a})),this.folderpath.value=l.basepath+(a?"/"+a:""),n.folder=a,n)n.hasOwnProperty(e)&&(t=n[e],o.push(encodeURIComponent(e)+(null===t?"":"="+encodeURIComponent(t))));r.query=o.join("&"),r.fragment=null,i("#uploadForm").prop("action",(function(e){return e.scheme+"://"+e.domain+(e.port?":"+e.port:"")+(e.path?e.path:"/")+(e.query?"?"+e.query:"")+(e.fragment?"#"+e.fragment:"")})(r)),i("#"+l.viewstyle).addClass("active")},setViewType:function(e){i("#"+e).addClass("active"),i("#"+l.viewstyle).removeClass("active"),l.viewstyle=e;var t=this.getFolder();t=encodeURIComponent(t),e=encodeURIComponent(e),this.setFrameUrl("index.php?option=com_media&view=mediaList&tmpl=component&folder="+t+"&layout="+e)},refreshFrame:function(){this.setFrameUrl()},getFolder:function(){var e=u(this.frame.location.search.substring(1));return e.folder=void 0===e.folder?"":e.folder,e.folder},setFrameUrl:function(e){null!==e&&(this.frameurl=e),this.frame.location.href=this.frameurl}};function u(e){var o={};return e=e||"",i.each(e.split(/[&;]/),(function(e,t){var a=t.split("=");o[decodeURIComponent(a[0])]=2==a.length?decodeURIComponent(a[1]):null})),o}i((function(){e.initialize(),document.updateUploader=function(){i(e.frame).one("load",(function(){e.onloadframe()}))},document.updateUploader()}))})(jQuery,window);

